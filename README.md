# Pixel Porter - 图片整理工具

Pixel Porter 是一个功能强大的图片整理工具，它可以根据图片的EXIF信息或创建时间自动重命名图片文件，并按日期组织到输出目录中。

## 功能特性

1. **智能重命名**：优先使用图片的EXIF拍摄时间，其次使用文件创建时间
2. **保持原信息**：所有操作都不会修改图片的原始元数据
3. **异常处理**：无法处理的文件（非图片或无法获取时间信息）会被移动到未处理目录
4. **日期组织**：每次运行程序都会在输出目录创建一个日期文件夹
5. **变更日志**：详细记录所有文件的处理情况
6. **批量处理**：支持处理目录下的所有图片文件

## 安装说明

### 环境要求

- Python 3.6 及以上
- pip 包管理工具

### 安装依赖

```bash
cd /Users/conrad/Desktop/workspace/toolkit/pixel-porter
pip install -r requirements.txt
```

## 使用方法

### 基本用法

```bash
python main.py --input <输入目录> --output <输出目录>
```

或者使用短参数：

```bash
python main.py -i <输入目录> -o <输出目录>
```

### 示例

```bash
python main.py --input ~/Downloads/photos --output ~/Pictures/organized
```

### 使用配置文件（推荐）

程序支持通过配置文件设置默认的输入输出目录，这样就不需要每次运行都指定参数。

- 编辑 `config.ini` 文件：

  ```ini
  [DEFAULT]
  # 默认输入目录（可以是绝对路径或相对路径）
  input = ./input
  
  # 默认输出目录（可以是绝对路径或相对路径）
  output = ./output
  ```

- 配置完成后，直接运行程序即可：

  ```bash
  python main.py
  ```

- 如果同时指定命令行参数和配置文件，命令行参数会优先使用：

  ```bash
  python main.py -i /custom/input/path  # 使用自定义输入目录，输出目录使用配置文件中的默认值
  ```

## 输出结构

程序运行后，输出目录的结构如下：

```
输出目录/
├── 20230615/          # 运行日期目录
│   ├── 20230610_103025_0001.jpg
│   ├── 20230610_103145_0002.jpg
│   └── ...
└── untreated/         # 未处理目录
    ├── unknown_file.pdf
    ├── corrupted_image.jpg
    └── ...
```

## 命名规则

图片文件将按照以下格式命名：

```
YYYYMMDD_HHMMSS_XXXX.ext
```

其中：
- `YYYYMMDD` 是年份、月份和日期
- `HHMMSS` 是小时、分钟和秒
- `XXXX` 是序号（从0001开始）
- `ext` 是原始文件扩展名

## 注意事项

1. 程序会复制文件而不是移动文件，所以原始文件不会被修改
2. 如果两个文件有相同的时间戳，会自动添加序号以避免文件名冲突
3. 支持的图片格式：JPG, JPEG, PNG, GIF, BMP, TIFF, WebP
4. 非图片文件或无法获取时间信息的图片会被移动到untreated目录
5. 日志文件会保存在当前目录的 `pixel_porter.log` 中

## 常见问题

### 为什么有些图片被移动到未处理目录？

可能的原因：
- 文件不是支持的图片格式
- 图片损坏，无法读取EXIF信息
- 图片没有包含拍摄时间信息且无法获取文件创建时间

### 程序运行速度慢怎么办？

- 减少输入目录中的文件数量
- 确保输入目录的结构不要太深
- 关闭其他占用系统资源的程序

## 许可证

本项目采用 MIT 许可证。

## 贡献

欢迎提交 Issues 和 Pull Requests 来帮助改进这个工具！